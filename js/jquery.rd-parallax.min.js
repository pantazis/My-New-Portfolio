!function(e){var i=function(i,a){this.options=a,this.settings={imageClass:"parallax_image",patternClass:"parallax_pattern",contentClass:"parallax_cnt",wrapClass:"parallax"},this.$wrap=e(i),this.$image=e.noop()};i.prototype={init:function(){var e=this;e.isInit=!0,e.createDOM(),e.blur(),e.createListeners()},createDOM:function(){var i=this;i.$wrap.addClass(i.settings.wrapClass).wrapInner(e("<div/>",{"class":i.settings.contentClass})).prepend(e("<div/>",{"class":i.options.pattern?i.settings.patternClass:i.settings.imageClass}).css({"background-image":"url("+i.options.url+")","background-color":i.options.color})),i.$image=i.options.pattern?i.$wrap.find("."+i.settings.patternClass):i.$wrap.find("."+i.settings.imageClass)},createListeners:function(){this.createResizeListener(),this.createScrollListener()},createScrollListener:function(){var i=this;(!i.isMobile()||i.options.mobile)&&(e(window).bind("touchstart",function(){i.isTouched=!0}),e(window).bind("touchend",function(){i.timer&&clearTimeout(i.timer),i.timer=setTimeout(function(){i.isTouched=!1},1200)}),e(window).bind("scroll",function(){i.move()}),i.move())},createResizeListener:function(){var i=this;(!i.isMobile()||i.options.mobile)&&(i.isMobile()||e(window).bind("resize",function(){i.resize()}),e(window).bind("orientationchange",function(){setTimeout(function(){i.resize()},300)}),i.resize())},move:function(){var i=this;if(i.isVisible()&&(!i.isMobile()||i.options.mobile)){var a=e(window).scrollTop(),t=i.$wrap.offset().top,n=e(window).height(),o=i.$wrap.outerHeight(),s=i.$image.height(),r=i.options.speed;0>r&&(r=0),r>1&&(r=1);var l=(a-(t-n))/(t+o-(t-n))*r;if("normal"==i.options.direction)var d=l*(o-s);else var d=(1-l)*(o-s);i.isIE()&&i.ieVersion()<=10?i.$image.css("top",""+d+"px"):i.isMobile()&&i.options.mobile?(i.isTouched||i.isInit)&&(i.$image.stop().animate({pos:d},{step:function(i){e(this).css("transform","translate3d(0, "+i+"px, 0)")},duration:i.options.duration},i.options.easing),i.isInit=!1):i.$image.css("transform","translate3d(0, "+d+"px, 0)"),i.isFirefox()&&window.devicePixelRatio<1&&(i.$image.css("background-color","#010101"),setTimeout(function(){i.$image.css("background-color",i.options.color)},10))}},resize:function(){var i=this,a=Math.max(e(window).height(),500);a<i.$wrap.outerHeight()&&(a=i.$wrap.outerHeight()+e(window).height()*i.options.speed),i.$image.height(a),setTimeout(function(){i.move(),i.blur()},300)},blur:function(){var i=this;!i.options.blur||i.isIE()||i.options.pattern||e("<img/>",{src:i.options.url}).load(function(){var e=i.$image.height()/this.height,a=i.$image.width()/this.width,t=Math.floor(Math.max(e,a));t>2?i.$image.css({filter:"blur("+t+"px)","-webkit-filter":"blur("+t+"px)"}):i.$image.css({filter:"blur(0px)","-webkit-filter":"blur(0px)"})})},isVisible:function(){var i=this,a=e(window).scrollTop(),t=e(window).height(),n=i.$wrap.offset().top,o=i.$wrap.outerHeight();return n+o>=a&&a+t>=n},isIE:function(){return-1!=navigator.appVersion.indexOf("MSIE")?!0:!1},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},ieVersion:function(){return parseFloat(navigator.appVersion.split("MSIE")[1])},isFirefox:function(){return"undefined"!=typeof InstallTrigger}},e.fn.rdparallax=function(a){var t=this.each(function(){var t=e.extend({},e.fn.rdparallax.defaults,a);t.url?new i(this,t).init():console.error("RD Parallax: data-url is not defined")});return t},e.fn.rdparallax.defaults={speed:.4,direction:"normal",blur:!1,mobile:!1,url:!1,pattern:!1,duration:200,easing:"linear",color:"inherit"},window.RDParallax_autoinit=function(a){e(a).each(function(){var a=e.extend({},e.fn.rdparallax.defaults,{url:e(this).data("url"),speed:e(this).data("speed"),direction:e(this).data("direction"),blur:e(this).data("blur"),mobile:e(this).data("mobile"),pattern:e(this).data("pattern"),color:e(this).data("color")});a.url?new i(this,a).init():console.error("RD Parallax: data-url is not defined")})}}(jQuery),$(document).ready(function(){RDParallax_autoinit(".parallax")});
